<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCMP Applicant Readiness Check</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background-color: #f5f5f5;
            padding: 20px;
        }

        /* Skip link for keyboard navigation */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #b50315;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            font-weight: 600;
            z-index: 100;
        }

        .skip-link:focus {
            top: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 40px;
        }

        .header {
            margin-bottom: 30px;
        }

        h1 {
            color: #1a1a1a;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            border-bottom: 3px solid #af3c43;
            padding-bottom: 10px;
        }

        .intro {
            color: #1a1a1a;
            font-size: 1rem;
            margin-bottom: 30px;
            margin-top: 20px;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #1a1a1a;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: #b50315;
            transition: width 0.3s ease;
            border-radius: 6px;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #1a1a1a;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .question-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1a1a1a;
        }

        .question-details {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }

        .question-details ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .question-details li {
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .question-details p {
            color: #1a1a1a;
        }

        /* Proper fieldset and legend styling */
        fieldset {
            border: none;
            padding: 0;
            margin: 0;
        }

        legend {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1a1a1a;
            padding: 0;
        }

        /* Radio button group styling */
        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .radio-option {
            flex: 1;
            position: relative;
        }

        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-label {
            display: block;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: 2px solid #b50315;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            color: #b50315;
            text-align: center;
            min-height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .radio-option input[type="radio"]:checked + .radio-label {
            background-color: #b50315;
            color: white;
        }

        .radio-option input[type="radio"]:focus + .radio-label {
            outline: 3px solid #ffbf47;
            outline-offset: 2px;
        }

        .radio-option input[type="radio"]:hover:not(:disabled) + .radio-label {
            background-color: #b50315;
            color: white;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .nav-button {
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: 600;
            border: 2px solid #1a1a1a;
            background: white;
            color: #1a1a1a;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 56px;
            min-width: 120px;
        }

        .nav-button:hover:not(:disabled) {
            background-color: #1a1a1a;
            color: white;
        }

        .nav-button:focus {
            outline: 3px solid #ffbf47;
            outline-offset: 2px;
        }

        .nav-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            border-color: #6c757d;
            color: #6c757d;
        }

        .nav-button.primary {
            background-color: #b50315;
            border-color: #b50315;
            color: white;
        }

        .nav-button.primary:hover:not(:disabled) {
            background-color: #8f0210;
            border-color: #8f0210;
        }

        .did-you-know {
            background-color: #fff8e1;
            padding: 20px;
            border-radius: 6px;
            border-left: 4px solid #f57c00;
            margin-top: 20px;
            display: none;
            border: 2px solid #f57c00;
        }

        .did-you-know.show {
            display: block;
        }

        .did-you-know-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
            font-weight: 700;
            color: #e65100;
        }

        .did-you-know-header i {
            font-size: 2rem;
            color: #f57c00;
        }

        .did-you-know p {
            color: #1a1a1a;
            margin: 0;
        }

        .results {
            padding: 40px 20px;
        }

        .results h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1a1a1a;
        }

        .results-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #1a1a1a;
            margin-bottom: 30px;
        }

        .results .restart-button {
            display: block;
            margin: 0 auto;
        }

        .results.success {
            background-color: #e8f5e9;
            border: 3px solid #2e7d32;
            border-radius: 8px;
        }

        .results.success h2 {
            color: #1b5e20;
        }

        .results.warning {
            background-color: #fff3e0;
            border: 3px solid #e65100;
            border-radius: 8px;
        }

        .results.warning h2 {
            color: #bf360c;
        }

        .restart-button,
        .apply-button {
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            background-color: #b50315;
            color: white;
            border: 2px solid #b50315;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            min-height: 56px;
            text-decoration: none;
            display: inline-block;
        }

        .restart-button:hover,
        .apply-button:hover {
            background-color: #8f0210;
            border-color: #8f0210;
        }

        .restart-button:focus,
        .apply-button:focus {
            outline: 3px solid #ffbf47;
            outline-offset: 2px;
        }

        .hidden {
            display: none;
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Live region for announcements */
        .live-region {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .radio-group {
                flex-direction: column;
            }

            .navigation {
                flex-direction: column;
            }

            .nav-button {
                width: 100%;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .radio-label,
            .nav-button {
                border-width: 3px;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Live region for screen reader announcements -->
    <div aria-live="polite" aria-atomic="true" class="live-region" id="live-region"></div>

    <div class="container">
        <header class="header">
            <h1>RCMP applicant readiness check</h1>
            <p class="intro">This readiness check is a self-assessment created to help you determine if you're ready and fit for a career in policing with the RCMP, before applying. Answer each question honestly to determine whether a career as a police officer is right for you.</p>
        </header>

        <main id="main-content">
            <div id="quiz-section">
                <div class="progress-container" role="region" aria-label="Quiz progress">
                    <div class="progress-label">
                        <span id="progress-text">Question <span id="current-question">1</span> of <span id="total-questions">9</span></span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Quiz completion progress">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>

                <form id="quiz-form" novalidate>
                    <div id="question-container" class="question-container"></div>

                    <nav class="navigation" aria-label="Quiz navigation">
                        <button type="button" id="prev-button" class="nav-button" aria-label="Go to previous question">
                            <span aria-hidden="true">← </span>Previous
                        </button>
                        <button type="button" id="next-button" class="nav-button primary" aria-label="Go to next question">
                            Next<span aria-hidden="true"> →</span>
                        </button>
                    </nav>
                </form>
            </div>

            <div id="results-section" class="hidden" role="region" aria-live="polite"></div>
        </main>
    </div>

    <script>
        const questions = [
            {
                number: 1,
                title: "Operational driving",
                details: "RCMP officers are expected to handle driving in various scenarios. Would you be comfortable driving in the following scenarios?",
                bullets: [
                    "Emergency response driving",
                    "Pursuit scenarios",
                    "Rural and remote terrain driving",
                    "Extreme weather conditions",
                    "Transporting detainees"
                ],
                question: "Are you comfortable driving in these scenarios?",
                info: "You must have a valid unrestricted Canadian driver's licence to apply to be a police officer. An unrestricted licence means you can drive unsupervised at any time, on any road, with passengers. In addition, applicants must be confident drivers, capable of driving in various scenarios."
            },
            {
                number: 2,
                title: "First aid certification",
                details: "You must have a valid Standard First Aid certification. Would you feel comfortable carrying out the following expectations in case of emergency?",
                bullets: [
                    "Providing immediate, basic medical assistance",
                    "Seeking and calling for medical assistance",
                    "Documenting and reporting incidents"
                ],
                question: "Are you comfortable providing first aid in emergencies?",
                info: "As a police officer you may often be the first responder to a scene, you must be comfortable assessing the situation and providing standard first aid support. You must have Level C CPR for infant, child and adult. Proof of your certification will be requested during the application process and must be valid during your cadet training if you advance in the process."
            },
            {
                number: 3,
                title: "Operational decision-making and the use of force",
                details: "As a police officer you are required to make sound, time-sensitive decisions, and at times apply the use of force.",
                bullets: [],
                question: "Would you be comfortable making timely decisions and using force as needed?",
                info: "Operational decision-making and the use of force are two of four critical health requirements related to the role of a police officer."
            },
            {
                number: 4,
                title: "Use of firearms and other intervention equipment",
                details: "As a police officer you are required to carry and use a firearm and other intervention tools as needed.",
                bullets: [],
                question: "Are you prepared and able to use and carry a firearm and other intervention tools as needed to support your duties?",
                info: "Police officers must maintain public order and safety, which includes using intervention techniques and firearms when required. If you're not comfortable with this, a career in policing may not be the right fit for you."
            },
            {
                number: 5,
                title: "Physical fitness",
                details: "Policing is a physically demanding job. Police officers are required to successfully complete the Police Fitness Assessment to be deemed fit for duty.",
                bullets: [],
                question: "Are you in good physical shape and prepared for the demands of police work and the Cadet Training Program?",
                info: "Applicant must arrive to cadet training fit and ready to meet the physical demands of policing. Cadet training at Depot isn't designed to build fitness. Arriving unprepared increases risk of injury and makes training harder."
            },
            {
                number: 6,
                title: "Training commitment",
                details: "",
                bullets: [],
                question: "Are you willing to spend 26 weeks living on-site at Depot, the RCMP's training academy in Saskatchewan?",
                info: "Training is full-time and includes evenings and weekends. Food, accommodation, and a weekly allowance are provided."
            },
            {
                number: 7,
                title: "Mobility",
                details: "",
                bullets: [],
                question: "Are you willing to relocate anywhere within Canada after graduation from the Cadet Training Program?",
                info: "The RCMP is a national service. While preference is a consideration, postings are ultimately based on operational needs."
            },
            {
                number: 8,
                title: "Flexibility to shift work",
                details: "",
                bullets: [],
                question: "Are you willing to work shift work, including nights, weekends, and holidays?",
                info: "Policing is a 24/7 service. You can expect to work irregular hours and holiday shifts as needed."
            },
            {
                number: 9,
                title: "Legal requirements",
                details: "",
                bullets: [],
                question: "Are you a law-abiding citizen and prepared to disclose any past criminal records, and be open to a full criminal records check?",
                info: "Police officers should uphold the law and must not be engaged in any criminal activities. Review the criminal activities and misconduct that could prevent you from being successful in your application."
            }
        ];

        let currentQuestionIndex = 0;
        let answers = new Array(questions.length).fill(null);

        const questionContainer = document.getElementById('question-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const progressFill = document.getElementById('progress-fill');
        const currentQuestionSpan = document.getElementById('current-question');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const progressPercent = document.getElementById('progress-percent');
        const progressBar = document.querySelector('.progress-bar');
        const liveRegion = document.getElementById('live-region');

        totalQuestionsSpan.textContent = questions.length;

        function announce(message) {
            liveRegion.textContent = message;
            setTimeout(() => {
                liveRegion.textContent = '';
            }, 1000);
        }

        function renderQuestion() {
            const question = questions[currentQuestionIndex];
            
            let html = `
                <div class="question-number" aria-label="Question ${question.number} of ${questions.length}">
                    Question ${question.number} of ${questions.length}
                </div>
                <h2 class="question-title" id="question-title-${question.number}">${question.title}</h2>
            `;

            if (question.details || question.bullets.length > 0) {
                html += '<div class="question-details">';
                if (question.details) {
                    html += `<p>${question.details}</p>`;
                }
                if (question.bullets.length > 0) {
                    html += '<ul>';
                    question.bullets.forEach(bullet => {
                        html += `<li>${bullet}</li>`;
                    });
                    html += '</ul>';
                }
                html += '</div>';
            }

            html += `
                <fieldset>
                    <legend id="question-legend-${question.number}">${question.question}</legend>
                    <div class="radio-group" role="radiogroup" aria-labelledby="question-legend-${question.number}">
                        <div class="radio-option">
                            <input 
                                type="radio" 
                                id="yes-${question.number}" 
                                name="question-${question.number}" 
                                value="yes"
                                ${answers[currentQuestionIndex] === 'yes' ? 'checked' : ''}
                            >
                            <label for="yes-${question.number}" class="radio-label">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input 
                                type="radio" 
                                id="no-${question.number}" 
                                name="question-${question.number}" 
                                value="no"
                                ${answers[currentQuestionIndex] === 'no' ? 'checked' : ''}
                            >
                            <label for="no-${question.number}" class="radio-label">No</label>
                        </div>
                    </div>
                </fieldset>
                <div class="did-you-know ${answers[currentQuestionIndex] !== null ? 'show' : ''}" 
                     id="info-section-${question.number}"
                     role="region"
                     aria-label="Additional information">
                    <div class="did-you-know-header">
                        <i class="fas fa-lightbulb" aria-hidden="true"></i>
                        <span>Did you know?</span>
                    </div>
                    <p>${question.info}</p>
                </div>
            `;

            questionContainer.innerHTML = html;

            // Add event listeners to radio buttons
            const yesRadio = document.getElementById(`yes-${question.number}`);
            const noRadio = document.getElementById(`no-${question.number}`);

            yesRadio.addEventListener('change', () => selectAnswer('yes'));
            noRadio.addEventListener('change', () => selectAnswer('no'));

            updateNavigation();
            updateProgress();

            // Focus management
            const questionTitle = document.getElementById(`question-title-${question.number}`);
            if (questionTitle) {
                questionTitle.focus();
                questionTitle.setAttribute('tabindex', '-1');
            }

            // Announce question change
            announce(`Question ${question.number} of ${questions.length}: ${question.title}`);
        }

        function selectAnswer(answer) {
            const wasNull = answers[currentQuestionIndex] === null;
            answers[currentQuestionIndex] = answer;
            
            const question = questions[currentQuestionIndex];
            const infoSection = document.getElementById(`info-section-${question.number}`);
            
            // Show the "Did you know?" section
            if (infoSection) {
                infoSection.classList.add('show');
                
                // Announce to screen readers when info appears for first time
                if (wasNull) {
                    announce('Additional information is now available below the answer choices.');
                }
            }

            updateNavigation();
        }

        function updateNavigation() {
            prevButton.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === questions.length - 1) {
                nextButton.textContent = 'View results';
                nextButton.setAttribute('aria-label', 'View your results');
                nextButton.disabled = answers[currentQuestionIndex] === null;
            } else {
                const nextText = document.createElement('span');
                nextText.innerHTML = 'Next<span aria-hidden="true"> →</span>';
                nextButton.innerHTML = '';
                nextButton.appendChild(nextText.firstChild);
                nextButton.appendChild(nextText.lastChild);
                nextButton.setAttribute('aria-label', 'Go to next question');
                nextButton.disabled = answers[currentQuestionIndex] === null;
            }
        }

        function updateProgress() {
            const answeredQuestions = answers.filter(a => a !== null).length;
            const progress = (answeredQuestions / questions.length) * 100;
            progressFill.style.width = progress + '%';
            progressBar.setAttribute('aria-valuenow', Math.round(progress));
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            progressPercent.textContent = Math.round(progress) + '%';
        }

        function showResults() {
            const yesCount = answers.filter(a => a === 'yes').length;
            const noCount = answers.filter(a => a === 'no').length;

            let html = '';
            
            if (yesCount === questions.length) {
                html = `
                    <div class="results success">
                        <h2 id="results-heading">Congratulations!</h2>
                        <div class="results-content">
                            <p>Looks like you are suited to be an RCMP police officer. If you've already reviewed the basic requirements, read through the application process to know what you can expect.</p>
                        </div>
                        <a href="https://www.rcmp-grc.gc.ca/en/police-officers" 
                           class="apply-button" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           aria-label="Apply now - Opens in a new window">
                            Apply now
                            <span class="sr-only">(opens in new window)</span>
                        </a>
                    </div>
                `;
            } else {
                html = `
                    <div class="results warning">
                        <h2 id="results-heading">Additional preparation needed</h2>
                        <div class="results-content">
                            <p>Looks like you don't meet all the requirements just yet. Before you apply, review the basic requirements to be an RCMP police officer to make sure you're fit and ready for a career in policing.</p>
                            <p style="margin-top: 15px;">You answered "Yes" to ${yesCount} out of ${questions.length} questions.</p>
                        </div>
                        <button type="button" class="restart-button" onclick="restartQuiz()">Start over</button>
                    </div>
                `;
            }

            resultsSection.innerHTML = html;
            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            
            // Focus management
            const resultsHeading = document.getElementById('results-heading');
            if (resultsHeading) {
                resultsHeading.setAttribute('tabindex', '-1');
                resultsHeading.focus();
            }

            // Announce results
            if (yesCount === questions.length) {
                announce('Quiz complete! Congratulations, you appear suited to be an RCMP police officer.');
            } else {
                announce(`Quiz complete! You answered yes to ${yesCount} out of ${questions.length} questions. Additional preparation may be needed.`);
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = new Array(questions.length).fill(null);
            quizSection.classList.remove('hidden');
            resultsSection.classList.add('hidden');
            renderQuestion();
            announce('Quiz restarted. You are back at question 1.');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                showResults();
            }
        });

        // Keyboard navigation enhancement
        document.addEventListener('keydown', (e) => {
            // Allow arrow keys to navigate between questions when not focused on a radio button
            if (e.target.type !== 'radio') {
                if (e.key === 'ArrowRight' && !nextButton.disabled) {
                    nextButton.click();
                } else if (e.key === 'ArrowLeft' && !prevButton.disabled) {
                    prevButton.click();
                }
            }
        });

        // Initialize
        renderQuestion();
    </script>
</body>
</html>
